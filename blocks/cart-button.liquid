{%- liquid
  assign product_form_id = 'product-form-' | append: block.id
-%}

<product-form class="product-form">
  {%- form 'product', card_product, id: product_form_id, class: 'form', novalidate: 'novalidate', data-type: 'add-to-cart-form' -%}
    <input type="hidden" name="id" value="{{ card_product.selected_or_first_available_variant.id }}" class="product-variant-id">
    
    <div class="product-form__buttons">
      <button
        id="{{ product_form_id }}-submit"
        type="submit"
        name="add"
        class="product-form__submit button button--full-width button--primary"
        {% if card_product.selected_or_first_available_variant.available == false %}disabled{% endif %}
      >
        <span>
          {%- if card_product.selected_or_first_available_variant.available -%}
            Add to Cart
          {%- else -%}
            Sold Out
          {%- endif -%}
        </span>
      </button>
    </div>
  {%- endform -%}
</product-form>

{% schema %}
{
  "name": "Add to Cart Button",
  "settings": []
}
{% endschema %}